// -*- mode: c++ -*-

#include <logging/LLogApi.h>
#include <utilities/GDefinitions.h>

using namespace LOGMASTER;
#include <iostream>
using std::cout;
using std::endl;

#ifdef _WIN32
#include <Windows.h>
#endif

#include <utilities/GException.h>
#include <utilities/GUtilities.h>
#include <utilities/GTime.h>

#include <intercom/KFInterCom.h>
#include <kf-common/KFDeviceInfo.h>

#include <thread>
#include <chrono>
#include <memory>
#include <ctime>

#include <com/GCom.h>
#include <map>

// auto client = std::make_shared<KFClientMain >(argc, argv);
 //       th1 = thread( &KFClientMain::Run, client  );

void help();

bool do_run = true;

void get_device_info( vector<string> ids );


int main(int argc, const char **  argv )
{

    /*
    auto ic =  KFInterCom::Instance();
    std::thread th_ic = std::thread( &KFInterCom::StartIntercom, ic,  eCOM_MODE::UDP, 4444, 4445   );
    vector<string> devs = {"M2", "M2XX", "M3",   };
    std::thread th1 = std::thread( get_device_info, devs );
    std::thread th2 = std::thread( get_device_info, devs );
    std::this_thread::sleep_for(std::chrono::milliseconds(10000));

    do_run = false;

    th1.join();
    th2.join();

    FORCE_DEBUG("th1, and th2 was joined");

    FORCE_DEBUG("joining intercom .......");
    th_ic.join();
    FORCE_DEBUG("Intercom was joined");
*/

    return 0;
}


/*
void get_device_info( vector<string> ids )
{
    while (do_run == true)
    {
        for(size_t i=0; i < ids.size; i++ )
        {
       //     auto d = ic->Get

        }


    } 


}
*/



void help()
{
    cout << "\t" << g_utilities()->TabAlign("h") <<  "Prints help menu (this menu)" << endl;
    cout << "\t" << g_utilities()->TabAlign("q") <<  "Quits the application" << endl;
    cout << "\t" << g_utilities()->TabAlign("p") <<  "Prints all sensor values" << endl;
    cout << "\t" << g_utilities()->TabAlign("d [device_id]") <<  "Prints info for a given device" << endl;
}



